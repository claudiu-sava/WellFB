<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:replace="~{/fragments/navbar :: header}"></div>
<div th:replace="~{/fragments/head :: head}"></div>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-9 text-center">
            <!-- Left column content -->
            <h2>Column 1</h2>
            <p>This is the content for column 1.</p>

            <table class="table">

                <tbody>
                <tr th:each="post:${allPosts}">
                    <td>

                        <div class="container-fluid">
                            <h2 class="my-3" th:text="${post.getUser().getUsername()}"></h2>
                        </div>

                        <img th:src="@{${post.getUploadFile().getFileName()}}" alt="image" class="img-fluid vh-100">
                        <blockquote class="text-break my-2" th:text="${post.getDescription()}"></blockquote>
                        <div role="group">
                            <div class="btn-group" role="group">

                                <button type="submit" onclick="update(this.id)" th:id="'likeButton_' + ${post.getId().toString()}" class="btn btn-link">
                                    <div id="buttons">
                                        <img th:if="${post.getLikedBy().contains(loggedUser)}" th:src="@{/drawable/like_icon_red_50.png}" alt="like" th:id="'likeImage_' + ${post.getId().toString()}">
                                        <img th:unless="${post.getLikedBy().contains(loggedUser)}" th:src="@{/drawable/like_icon_50.png}" alt="like" th:id="'likeImage_' + ${post.getId().toString()}">
                                    </div>
                                </button>


                                <img th:if="${post.getUser().getUsername().equals(loggedUser.getUsername())}" th:src="@{/drawable/edit_icon_50.png}" alt="edit">
                                <img th:if="${post.getUser().getUsername().equals(loggedUser.getUsername())}" th:src="@{/drawable/remove_icon_50.png}" alt="remove post">
                            </div>

                            <p class="mr-3 align-middle mt-1"><span th:id="'likeCount_' + ${post.getId().toString()}" th:text="${post.getLikedBy().size()}"></span> persons liked that</p>
                        </div>

                    </td>
                </tr>
                </tbody>

            </table>
        </div>
        <div class="col-md-3">
            <!-- Right column content -->
            <h2>Column 2</h2>
            <p>This is the content for column 2.</p>

            <h2>You might know them</h2>
            <table class="table">

                <tbody>
                <tr th:each="user:${allUsers}">
                    <td>
                        <a th:href="@{/users/?username=__${user.getUsername()}__}">
                            <div class="btn-group" role="group">
                                <img th:src="@{/drawable/user_icon_50.png}" alt="user" class="ml-3">
                                <p th:text="${user.getUsername()}"></p>
                            </div>
                        </a>
                    </td>
                </tr>
                </tbody>

            </table>
        </div>
    </div>
</div>


</body>
</html>
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:replace="~{/fragments/navbar :: header(${loggedUser})}"></div>
<div th:replace="~{/fragments/head :: head}"></div>

<div class="container-fluid">
    <div th:each="post: ${allPosts}" class="row text-center mb-1">
        <div class="col-md-5 mt-5">

            <a th:href="@{'/users/?username=' + ${post}}"><img th:src="@{${post.getUploadFile().getFileName()}}" style="width: 250px; height: 200px;"></a>

        </div>
        <div class="col-md-5 mt-5">

            <div th:if="${post.getComments().isEmpty()}">
                <p>No comments yet</p>
            </div>

            <div th:unless="${post.getComments().isEmpty()}" th:each="comment : ${post.getComments()}">

                <div class="d-flex justify-content-center align-items-center" role="group">
                    <img alt="user" th:src="@{${comment.getUser().getAvatar().getFileName()}}" class="profile-pic-icon-tiny">
                    <h4 class="my-3 ml-3 username" th:text="${comment.getUser().getUsername()}"></h4>
                </div>

                <p th:id="'comment_' + ${comment.getId()}" th:text="${comment.getComment()}"></p>
                <div class="d-flex justify-content-center align-items-center" role="group">
                    <button type="button" th:id="'editCommentButton_' + ${comment.getId().toString()}" class="btn btn-link" data-toggle="modal" th:comment-id="${comment.getId()}" th:comment="${comment.getComment()}" data-target="#commentEditModal">
                        <img th:src="@{/drawable/edit_icon_50.png}"  style="height: 25px; width: 25px;">
                    </button>

                    <button type="button" th:id="'deleteCommentButton_' + ${comment.getId().toString()}" class="btn btn-link" data-toggle="modal" th:comment-id="${comment.getId()}" th:post-id="${post.getId()}" data-target="#commentDeleteModal">
                        <img th:src="@{/drawable/remove_icon_50.png}" th:comm-id="${comment.getId()}" style="height: 25px; width: 25px;">
                    </button>
                </div>


            </div>
        </div>
    </div>
</div>

<div th:insert="~{/fragments/commentDeleteModal :: modal}"></div>
<div th:insert="~{/fragments/commentEditModal :: modal}"></div>
</body>
</html>